<section class="case-studies section" id="work">
  <div class="background">
    <div class="glow glow-blue-1"></div>
    <div class="glow glow-blue-2"></div>
    <div class="glow glow-red-1"></div>
    <div class="glow glow-big-blue-1"></div>
  </div>
  <div class="container">
    <div class="section-header">
      <p class="kicker">Case Studies</p>
      <h2 class="section-title">Bringing Ideas to Life</h2>
      <p class="section-description">
        See how concepts become products. Each one built from scratch with careful design, clean
        code, and real impact.
      </p>

      <a routerLink="/projects" class="learn-more">More Projects <span class="arrow">â†’</span></a>
    </div>
  </div>
  <div class="carousel-container" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
    <!-- Left fade gradient -->
    <div class="carousel-gradient carousel-gradient-left"></div>

    <!-- Right fade gradient -->
    <div class="carousel-gradient carousel-gradient-right"></div>

    <!-- Carousel wrapper -->
    <div class="carousel-wrapper">
      <div
        class="carousel-track"
        [style.transform]="transformStyle"
        [class.no-transition]="!isTransitioning"
        [class.dragging]="isDragging"
        (mousedown)="onDragStart($event)"
        (touchstart)="onDragStart($event)"
        (touchmove)="onDragMove($event)"
        (touchend)="onDragEnd($event)"
        (touchcancel)="onDragEnd($event)"
      >
        @for (project of projects; track $index; let i = $index) {
        <div class="carousel-slide">
          <app-project-card [project]="project" [isActive]="i === currentIndex"> </app-project-card>
        </div>
        }
      </div>
    </div>

    <!-- Navigation buttons -->
    <button
      class="carousel-btn carousel-btn-prev"
      (click)="previous()"
      aria-label="Previous project"
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
    </button>
    <button class="carousel-btn carousel-btn-next" (click)="next()" aria-label="Next project">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </button>

    <!-- Dots indicator -->
    <div class="carousel-dots">
      @for (project of originalProjects; track project.title; let i = $index) {
      <button
        class="carousel-dot"
        [class.active]="i === activeOriginalIndex"
        (click)="goToSlide(i)"
        [attr.aria-label]="'Go to project ' + (i + 1)"
      ></button>
      }
    </div>
  </div>
</section>
