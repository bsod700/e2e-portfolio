<section class="technologies section" id="technologies">
  <div class="background">
    <div class="glow glow-blue-1"></div>
    <div class="glow glow-dark-4"></div>
  </div>
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Technologies Behind<br />Every Product</h2>
    </div>

    <div class="glow-container">
      <div class="glow glow-dark-1"></div>
      <div class="glow glow-dark-2"></div>
    </div>
    <!-- Animation Control Button -->
    <div class="animation-control-btn-container">
      <button 
        class="animation-control-btn"
        (click)="toggleAnimation()"
        [attr.aria-label]="isAnimationPaused ? 'Play animation' : 'Pause animation'"
        type="button">
        @if (!isAnimationPaused) {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="6" y="4" width="4" height="16"></rect>
            <rect x="14" y="4" width="4" height="16"></rect>
          </svg>
        }
        @if (isAnimationPaused) {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
        }
      </button>
    </div>

    <div class="carousel-container" 
         [class.paused]="isAnimationPaused"
         (mouseenter)="pauseAnimation()"
         (mouseleave)="resumeAnimation()">
      
      <!-- Single Row - Converging from both sides -->
      <div class="carousel-row">
        <div class="glow-container">
          <div class="glow glow-dark-3"></div>
        </div>
        <!-- Left Side - Scrolling Right (towards center) -->
        <div class="carousel-half left-side">
          <div class="carousel-track scroll-to-center"
               [style.--animation-distance]="leftAnimationDistance">
            @for (tech of leftSideTechnologiesDuplicated; track $index) {
              <div class="tech-card"
                   (mouseenter)="showTooltip($event, tech.name)"
                   (mouseleave)="hideTooltip()">
                <img [src]="tech.icon" [alt]="tech.name" class="tech-icon" />
              </div>
            }
          </div>
        </div>

        <!-- Center Divider - Logo Pulse -->
        <div class="center-divider logo-pulse">
          <!-- Ripple Circles -->
          @for (ripple of rippleArray; track ripple) {
            <div class="ripple-circle ripple-{{ ripple }}"></div>
          }
          <!-- Logo Circle with Glow -->
          <div class="logo-circle">
            <!-- Glow circles inside -->
            <div class="glow-circle glow-1"></div>
            <div class="glow-circle glow-2"></div>
            <div class="glow-circle glow-3"></div>
            <div class="glow-circle glow-4"></div>
            <div class="glow-circle glow-5"></div>
            <div class="glow-circle glow-6"></div>
            <!-- Logo Icon -->
            <img src="assets/images/logo-icon-white-3.svg" alt="Logo" class="logo-icon">
          </div>
        </div>

        <!-- Right Side - Scrolling Left (towards center) -->
        <div class="carousel-half right-side">
          <div class="carousel-track scroll-to-center-reverse"
               [style.--animation-distance]="rightAnimationDistance">
            @for (tech of rightSideTechnologiesDuplicated; track $index) {
              <div class="tech-card"
                   (mouseenter)="showTooltip($event, tech.name)"
                   (mouseleave)="hideTooltip()">
                <img [src]="tech.icon" [alt]="tech.name" class="tech-icon" />
              </div>
            }
          </div>
        </div>
      </div>
    </div>

    <!-- Tooltip -->
    @if (activeTooltip) {
      <div class="tech-tooltip"
           [style.left.px]="activeTooltip.x"
           [style.top.px]="activeTooltip.y">
        {{ activeTooltip.name }}
      </div>
    }

    <div class="undertext">
      <p class="undertext-text">I use modern tools across design and development to create fast, scalable and visually consistent digital products.</p>
    </div>
  </div>
</section>
