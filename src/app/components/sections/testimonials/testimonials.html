<section class="testimonials section" id="testimonials">
  <div class="background">
    <div class="stars"></div>
  </div>
  <div class="container">
    <div class="section-header">
      <p class="kicker">Real Success Stories</p>
      <h2 class="section-title">Words from past collaborators</h2>
      <p class="section-description">
        A few notes from clients and teammates on process, communication, and delivery.
      </p>
    </div>

    <!-- Animation Control Button -->
    <div class="animation-control-btn-container">
      <button
        class="animation-control-btn"
        (click)="toggleAnimation()"
        [attr.aria-label]="isAnimationPaused() ? 'Play animation' : 'Pause animation'"
        type="button"
      >
        @if (!isAnimationPaused()) {
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <rect x="6" y="4" width="4" height="16"></rect>
          <rect x="14" y="4" width="4" height="16"></rect>
        </svg>
        } @if (isAnimationPaused()) {
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <polygon points="5 3 19 12 5 21 5 3"></polygon>
        </svg>
        }
      </button>
    </div>
  </div>

  <div
    class="carousel-container"
    [class.paused]="isAnimationPaused()"
    (mouseenter)="pauseAnimation()"
    (mouseleave)="resumeAnimation()"
  >
  @for (row of carouselRows(); track row.id) {
  <div class="carousel-row" [ngClass]="row.direction">
    <div class="carousel-track">
      @for (card of row.cards; track card.key) {
      @let testimonial = card.testimonial;
      <div class="testimonial-card">
        <div class="testimonial-header">
          <div
            class="avatar"
            [style.background-image]="testimonial.avatar ? 'url(' + testimonial.avatar + ')' : ''"
          >
            @if (!testimonial.avatar) {
            <span>{{ testimonial.name.charAt(0) }}</span>
            }
          </div>
          <div class="author-info">
            <h4>{{ testimonial.name }}</h4>
            <p>{{ testimonial.role }}</p>
          </div>
        </div>
        <div class="testimonial-content">
          <p>{{ testimonial.text }}</p>
        </div>
        <!-- @if (row.showRating) {
        <div class="testimonial-footer">
          <div class="rating">
            @for (star of ratingStars; track star) {
            <span>â˜…</span>
            }
          </div>
        </div>
        } -->
      </div>
      }
    </div>
  </div>
  }
  </div>
</section>
