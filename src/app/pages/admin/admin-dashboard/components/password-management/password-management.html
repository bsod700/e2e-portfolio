<div class="password-section">
  <h2>Change My Password</h2>
  <form (ngSubmit)="updatePassword()" class="password-form">
    <div class="form-group">
      <label for="newPassword">New Password</label>
      <div class="password-input-wrapper">
        <input
          [type]="showNewPassword ? 'text' : 'password'"
          id="newPassword"
          [(ngModel)]="newPassword"
          name="newPassword"
          required
          minlength="6"
          placeholder="Enter new password"
          class="form-input"
        />
        <button
          type="button"
          class="password-visibility-toggle"
          (click)="toggleNewPasswordVisibility()"
          [attr.aria-label]="showNewPassword ? 'Hide password' : 'Show password'"
          [attr.aria-pressed]="showNewPassword"
        >
          <svg
            viewBox="0 0 24 24"
            aria-hidden="true"
            focusable="false"
          >
            <path
              *ngIf="!showNewPassword"
              d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7C21.27 8.11 17 5 12 5zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"
            />
            <path
              *ngIf="showNewPassword"
              d="M12 6a9.77 9.77 0 0 1 9.53 7A9.77 9.77 0 0 1 12 20a9.77 9.77 0 0 1-9.53-7A9.77 9.77 0 0 1 12 6m0-2C6.5 4 1.73 7.11 0 12c1.73 4.89 6.5 8 12 8s10.27-3.11 12-8c-1.73-4.89-6.5-8-12-8Zm0 5a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3Z"
            />
          </svg>
        </button>
      </div>
    </div>

    <div class="form-group">
      <label for="confirmPassword">Confirm Password</label>
      <div class="password-input-wrapper">
        <input
          [type]="showConfirmPassword ? 'text' : 'password'"
          id="confirmPassword"
          [(ngModel)]="confirmPassword"
          name="confirmPassword"
          required
          minlength="6"
          placeholder="Confirm new password"
          class="form-input"
        />
        <button
          type="button"
          class="password-visibility-toggle"
          (click)="toggleConfirmPasswordVisibility()"
          [attr.aria-label]="showConfirmPassword ? 'Hide password' : 'Show password'"
          [attr.aria-pressed]="showConfirmPassword"
        >
          <svg
            viewBox="0 0 24 24"
            aria-hidden="true"
            focusable="false"
          >
            <path
              *ngIf="!showConfirmPassword"
              d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7C21.27 8.11 17 5 12 5zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"
            />
            <path
              *ngIf="showConfirmPassword"
              d="M12 6a9.77 9.77 0 0 1 9.53 7A9.77 9.77 0 0 1 12 20a9.77 9.77 0 0 1-9.53-7A9.77 9.77 0 0 1 12 6m0-2C6.5 4 1.73 7.11 0 12c1.73 4.89 6.5 8 12 8s10.27-3.11 12-8c-1.73-4.89-6.5-8-12-8Zm0 5a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3Z"
            />
          </svg>
        </button>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="updatingPassword" class="btn-primary">
        @if (updatingPassword) {
          <span>Updating...</span>
        }
        @if (!updatingPassword) {
          <span>Update Password</span>
        }
      </button>
      <button type="button" (click)="onCancel()" class="btn-secondary">Cancel</button>
    </div>

    @if (passwordError) {
      <div class="error-message">
        {{ passwordError }}
      </div>
    }

    @if (passwordSuccess) {
      <div class="success-message">
        {{ passwordSuccess }}
      </div>
    }
  </form>
</div>

