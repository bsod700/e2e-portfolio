<div class="tab-content">
  <div class="content-grid">
    <div class="content-section">
      <h2>Projects / Case Studies</h2>
      <p class="section-description">Edit project cards displayed on the projects page</p>

      @if (projects.length > 0) {
        <div class="form-group">
          <app-custom-dropdown
            [options]="dropdownOptions"
            [selectedValue]="selectedProjectId"
            [placeholder]="'-- Select a project --'"
            [label]="'Select Project to Edit'"
            [id]="'project-select'"
            (valueChange)="onProjectSelect($event)"
          ></app-custom-dropdown>
        </div>
      }

      @if (projects.length === 0) {
        <div class="empty-state">
          <p>No projects found. Content will appear here once loaded from the database.</p>
        </div>
      }

      <!-- Edit Project Form -->
      @if (editingProject) {
        <div class="edit-form">
        <h3>Edit Project: {{ editingProject.project_id || 'Untitled Project' }}</h3>
        <p class="form-note">These fields control what appears on the project cards.</p>
        
        <form (ngSubmit)="saveProject()" class="content-form">

          <div class="form-group">
            <label>Title</label>
            <input type="text" [(ngModel)]="editingProject.title" name="title" required class="form-input" />
            <small class="form-hint">Title shown on the project card</small>
          </div>

          <div class="form-group">
            <label>Description</label>
            <textarea [(ngModel)]="editingProject.description" name="description" required rows="4" class="form-textarea"></textarea>
            <small class="form-hint">Description shown on the project card</small>
          </div>

          <div class="form-group">
            <label>Logo URL</label>
            <input type="text" [(ngModel)]="editingProject.logo_url" name="logo_url" class="form-input" />
            <small class="form-hint">URL to the project logo image</small>
          </div>

          <div class="form-group">
            <label>Image Source</label>
            <input type="text" [(ngModel)]="editingProject.image_src" name="image_src" class="form-input" />
            <small class="form-hint">URL to the project preview image</small>
          </div>

          <div class="form-group">
            <label>Link</label>
            <input type="text" [(ngModel)]="editingProject.link" name="link" class="form-input" />
            <small class="form-hint">Link to the project (if applicable)</small>
          </div>

          <div class="form-group">
            <label>Display Order</label>
            <input type="number" [(ngModel)]="editingProject.display_order" name="display_order" class="form-input" min="0" />
            <small class="form-hint">Order in which this project appears (lower numbers appear first)</small>
          </div>

          <div class="form-actions">
            <button type="submit" [disabled]="saving" class="btn-primary">Save</button>
            <button type="button" (click)="cancelEditProject()" class="btn-secondary">Cancel</button>
          </div>
        </form>
        </div>
      }

      @if (error) {
        <div class="error-message">
          {{ error }}
        </div>
      }

      @if (successMessage) {
        <div class="success-message">
          {{ successMessage }}
        </div>
      }
    </div>

    @if (editingProject) {
      <div class="preview-section">
        <h2>Preview</h2>
        <div class="preview-card preview-project-card">
          <div class="preview-project-content">
            @if (editingProject.logo_url) {
              <div class="preview-project-header">
                <img [src]="editingProject.logo_url" [alt]="editingProject.title" class="preview-project-logo" />
              </div>
            }
            <h3 class="preview-project-title">{{ editingProject.title || 'Project Title' }}</h3>
            <p class="preview-project-description">{{ editingProject.description || 'Project description will appear here...' }}</p>
            @if (editingProject.image_src) {
              <div class="preview-project-image">
                <img [src]="editingProject.image_src" [alt]="editingProject.title" class="preview-image" />
              </div>
            }
            @if (editingProject.link) {
              <div class="preview-view-project">
                <a [href]="editingProject.link" target="_blank" class="preview-link">
                  View Project <span class="arrow">â†’</span>
                </a>
              </div>
            }
          </div>
        </div>
      </div>
    }
  </div>
</div>
